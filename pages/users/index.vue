<template>
  <div>
    <aside class="fleft">å·¦ä¾§è¾¹æ ç›®</aside>

    <article>
      ä¸»å†…å®¹åŒº users

      <NLink to="./99199"> è·³åˆ°99199çš„URLå»ç©ç©ğŸš€ </NLink>
    </article>
    <aside class="fright">å³ä¾§è¾¹æ ç›®</aside>
  </div>
</template>

<script>
export default {
    



/*
  æœåŠ¡ç«¯åŒæ­¥æ•°æ® å®¢æˆ·ç«¯å¼‚æ­¥æ•°æ® å’Œ åˆ†é¡µçš„è§£å†³ ä½¿ç”¨ è¿›è¡ŒåŒç«¯æ¸²æŸ“ 
  async asyncData({ app, params,query,env,$config }) {
        console.log("::::::::: asyncData ::::::::");
        if(!process.server) return;
        let _data = {
            title:'æ’è¡Œæ¦œ',
            name:app.head.title,
            empty:"æ— æ’è¡Œ",
            total:0,
            pageSize:20,
            currentPage:(query.page || 1)*1,
            tableData:[],
            regionFilter: {
                value:(query.zone || 0)*1 ,
            },
            ServerRenderDataTag:true // æœåŠ¡ç«¯åŠ è½½æ•°æ®æ ‡è¯†
            
        };
        console.log("æœåŠ¡ç«¯åŒæ­¥åŠ è½½æ•°æ®")
        let _list = await api.getMyList({
            page_status:_data.regionFilter.value *1,
            page_size:_data.pageSize,
            page:_data.currentPage
        });
        if(_list){
            if(_list.count)_data.total=_list.count *1;
            if(_list.list)_data.tableData=api.formatTeamList(_list.list);
        }
        return _data;
    },
    data(){
        // console.log(this);
        return {
            title:'æ’è¡Œæ¦œ',
            empty:"æ— æ’è¡Œ",
            total:0,
            pageSize:20,
            currentPage:1,
            tableData:[],
            ServerRenderDataTag:false // æœåŠ¡ç«¯åŠ è½½æ•°æ®æ ‡è¯†
        };
    },
    methods: {
        getListData(){
            var _this = this;
            this.empty ="åŠ è½½...";
            this.tableData = [];
            
            api.getMyList({
                page_status:this.regionFilter.value *1,
                page_size:this.pageSize,
                page:this.currentPage
            },function(_list){
                if(_list && _list.count){
                    if(_list.count)_this.total=_list.count *1;
                    if(_list.list)_this.tableData=api.formatTeamList(_list.list);
                }else{
                    _this.empty ="æ— æ’è¡Œ";
                }
            });
        },
        zoneChange(val){
            // æ¡ä»¶ç­›é€‰
            this.currentPage = 1;
            this.page_status = val;
            this.$router.push({ query: {zone: val}});
            this.getListData();
        },
        currentChange(page){
            //åˆ†é¡µ
            this.currentPage = page;
            let query = {page: page};
            if(this.regionFilter.value) query.zone = this.regionFilter.value;
            this.$router.push({query });
            this.getListData();
        }
    },
    created() {
        // åˆ¤æ–­æ˜¯å¦æ˜¯å®¢æˆ·ç«¯ å¹¶ä¸” æœåŠ¡ç«¯æ²¡æœ‰æ¸²æŸ“æ•°æ®æ ‡è¯†
        if(process.client && !this.ServerRenderDataTag){
            this.getListData(); // å®¢æˆ·ç«¯å¼‚æ­¥åŠ è½½æ•°æ®
        }
    },


    */




/*
    asyncData() {
      // æ•°ç»„è§£æ„è·å¾—å¯¹åº”è¯·æ±‚çš„æ•°æ®
      let [indexData, recommendAuthors, recommendBooks] = await Promise.all([
        // æ–‡ç« åˆ—è¡¨
        app.$api.getIndexList({
          first: 20,
          order: 'POPULAR',
          category: 1
        }).then(res => res.s == 1 ? res.d : {}),
        // æ¨èä½œè€…
        app.$api.getRecommendAuthor({
          limit: 5
        }).then(res => res.s == 1 ? res.d : []),
        // æ¨èå°å†Œ
        app.$api.getRecommendBook().then(res => res.s === 1 ? res.d.data : []),
      ])
      return {
        indexData,
        recommendAuthors,
        recommendBooks
      }
    }

    */


   

};
</script>

<style></style>
