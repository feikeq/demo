<template>
  <div>
    <aside class="fleft">å·¦ä¾§è¾¹æ ç›®</aside>

    <article>
      ä¸»å†…å®¹åŒº users

      <NLink to="./99199"> è·³åˆ°99199çš„URLå»ç©ç©ğŸš€ </NLink>
    </article>
    <aside class="fright">å³ä¾§è¾¹æ ç›®</aside>
  </div>
</template>

<script>
export default {
  //   asyncData() {
  //     // æ•°ç»„è§£æ„è·å¾—å¯¹åº”è¯·æ±‚çš„æ•°æ®
  //     let [indexData, recommendAuthors, recommendBooks] = await Promise.all([
  //       // æ–‡ç« åˆ—è¡¨
  //       app.$api.getIndexList({
  //         first: 20,
  //         order: 'POPULAR',
  //         category: 1
  //       }).then(res => res.s == 1 ? res.d : {}),
  //       // æ¨èä½œè€…
  //       app.$api.getRecommendAuthor({
  //         limit: 5
  //       }).then(res => res.s == 1 ? res.d : []),
  //       // æ¨èå°å†Œ
  //       app.$api.getRecommendBook().then(res => res.s === 1 ? res.d.data : []),
  //     ])
  //     return {
  //       indexData,
  //       recommendAuthors,
  //       recommendBooks
  //     }
  //   }



/*
  æœåŠ¡ç«¯åŒæ­¥æ•°æ® å®¢æˆ·ç«¯å¼‚æ­¥æ•°æ® å’Œ åˆ†é¡µçš„è§£å†³
  async asyncData({ app, params,query,env,$config },callback) {
        console.log("::::::::: asyncData ::::::::");
        let _data = {
            title:'æˆ˜é˜Ÿæ’è¡Œæ¦œ',
            name:app.head.title,
            empty:"æš‚æ— æ’è¡Œ",
            total:0,
            pageSize:20,
            currentPage:(query.page || 1)*1,
            theGameID:query.game || 'LOL',
            tableData:[],
            regionFilter: {
                value:(query.zone || 0)*1 ,
                options: [
                    {
                        label: "çƒ­é—¨åœ°åŒº",
                        options: [
                            {
                                value: 0,
                                label: "æ‰€æœ‰åœ°åŒº"
                            },
                            {
                                value: 8,
                                label: "ä¸­å›½"
                            },
                            {
                                value: 1,
                                label: "éŸ©å›½"
                            }
                        ]
                    },
                    {
                        label: "å…¶å®ƒèµ›åŒº",
                        options: [
                            
                            {
                                value: 2,
                                label: "åŒ—ç¾"
                            },
                            {
                                value: 3,
                                label: "å—ç¾æ´²"
                            },
                            {
                                value: 4,
                                label: "å·´è¥¿"
                            },
                            {
                                value: 5,
                                label: "æ¬§æ´²"
                            },
                            {
                                value: 6,
                                label: "ç‹¬è”ä½“"
                            },
                            {
                                value: 7,
                                label: "åœŸè€³å…¶"
                            },
                            {
                                value: 9,
                                label: "ä¸­å›½å°æ¹¾"
                            },
                            {
                                value: 10,
                                label: "æ—¥æœ¬"
                            },
                            {
                                value: 11,
                                label: "è¶Šå—"
                            },
                            {
                                value: 12,
                                label: "ä¸œå—äºš"
                            },
                            {
                                value: 13,
                                label: "å¤§æ´‹æ´²"
                            },
                            {
                                value: 14,
                                label: "æ‹‰ç¾"
                            },
                            {
                                value: 15,
                                label: "äºšå¤ª"
                            }
                        ]
                    }
                ]
            }
        };

        if(process.client){
            console.log("å®¢æˆ·ç«¯å¼‚æ­¥åŠ è½½æ•°æ®")
            api.getTeamList({
                game_id:_data.theGameID,
                page_status:_data.regionFilter.value *1,
                page_size:_data.pageSize,
                page:_data.currentPage
            },function(_list){
                if(_list.count)_data.total=_list.count *1;
                if(_list.list)_data.tableData=api.formatTeamList(_list.list);
                callback(null,_data); // å†å¡«å……æ•°æ®
            }); 
            callback(null,_data); // å…ˆæ¸²æŸ“
        }else{
            console.log("æœåŠ¡ç«¯åŒæ­¥åŠ è½½æ•°æ®")
            let _list = await api.getTeamList({
                game_id:_data.theGameID,
                page_status:_data.regionFilter.value *1,
                page_size:_data.pageSize,
                page:_data.currentPage
            });
            if(_list){
                if(_list.count)_data.total=_list.count *1;
                if(_list.list)_data.tableData=api.formatTeamList(_list.list);
            }
            console.log("fanhui2121212");
            callback(null,_data);
            return _data;
        }
    },
    data(){
        // console.log(this);
        return {
            title:'æˆ˜é˜Ÿæ’è¡Œæ¦œ',
            // name:app.head.title,
            empty:"æš‚æ— æ’è¡Œ",
            total:0,
            pageSize:20,
            currentPage:1,
            theGameID:'LOL',
            tableData:[],
            regionFilter: {
                value:0 ,
                options: [
                    {
                        label: "çƒ­é—¨åœ°åŒº",
                        options: [
                            {
                                value: 0,
                                label: "æ‰€æœ‰åœ°åŒº"
                            },
                            {
                                value: 8,
                                label: "ä¸­å›½"
                            },
                            {
                                value: 1,
                                label: "éŸ©å›½"
                            }
                        ]
                    },
                    {
                        label: "å…¶å®ƒèµ›åŒº",
                        options: [
                            
                            {
                                value: 2,
                                label: "åŒ—ç¾"
                            },
                            {
                                value: 3,
                                label: "å—ç¾æ´²"
                            },
                            {
                                value: 4,
                                label: "å·´è¥¿"
                            },
                            {
                                value: 5,
                                label: "æ¬§æ´²"
                            },
                            {
                                value: 6,
                                label: "ç‹¬è”ä½“"
                            },
                            {
                                value: 7,
                                label: "åœŸè€³å…¶"
                            },
                            {
                                value: 9,
                                label: "ä¸­å›½å°æ¹¾"
                            },
                            {
                                value: 10,
                                label: "æ—¥æœ¬"
                            },
                            {
                                value: 11,
                                label: "è¶Šå—"
                            },
                            {
                                value: 12,
                                label: "ä¸œå—äºš"
                            },
                            {
                                value: 13,
                                label: "å¤§æ´‹æ´²"
                            },
                            {
                                value: 14,
                                label: "æ‹‰ç¾"
                            },
                            {
                                value: 15,
                                label: "äºšå¤ª"
                            }
                        ]
                    }
                ]
            }
        };
    },
    methods: {
        getTeamListData(){
            console.log('--------------currentChange------------',this.theGameID)
            var _this = this;
            this.empty ="æ­£åœ¨åŠ è½½æ•°æ®...";
            this.tableData = [];
            
            api.getTeamList({
                game_id:this.theGameID,
                page_status:this.regionFilter.value *1,
                page_size:this.pageSize,
                page:this.currentPage
            },function(_list){
                if(_list && _list.count){
                    if(_list.count)_this.total=_list.count *1;
                    if(_list.list)_this.tableData=api.formatTeamList(_list.list);
                }else{
                    _this.empty ="æš‚æ— æ’è¡Œ";
                }
            });
        },
        zoneChange(val){
            this.currentPage = 1;
            this.page_status = val;
            this.$router.push({ query: {zone: val}});
            this.getTeamListData();
        },
        currentChange(page){
            this.currentPage = page;
            let query = {page: page};
            if(this.regionFilter.value) query.zone = this.regionFilter.value;
            this.$router.push({query });
            this.getTeamListData();
        },
        rowClick(row, column, event) {
            // console.log(event);
            // console.log("row", row);
            // console.log("column", column);
            this.$router.push(`/team/${row.id}/`);
        },
        renderHeader(h, { column, $index }) {
            // console.log("column",column);
            // console.log("$index",$index);
            var _dom = [];
            if (column.columnKey)
                _dom.push(
                    h("i", {
                        class: column.columnKey,
                        style: "color:rgba(255, 255, 255,0.5);margin-right:5px;"
                    })
                );
            _dom.push(h("em", column.label));
            return h("span", _dom, { style: "height:40px" });
        },
        formatter(row, column, cellValue, index) {
            return cellValue;
        }
    }


    */


};
</script>

<style></style>
